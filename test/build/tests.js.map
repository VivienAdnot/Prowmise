{"version":3,"sources":["webpack:///webpack/bootstrap a88f12faf6c6f262a8f0","webpack:///./test/main.ts","webpack:///./test/src/prowmiseSpec.ts","webpack:///./src/prowmise.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACrCA,0CAA6B,CAG7B,CAAC,CAHgD;AAGjD,4BAAY,EAAE,CAAC;;;;;;;;ACJf,sCAAyB,CACzB,CAAC,CAD4C;AAG7C;KACI,QAAQ,CAAC,UAAU,EAAE;SACjB,IAAI,QAAiB,CAAC;SAEtB,UAAU,CAAC;aACP,QAAQ,GAAG,IAAI,mBAAQ,CAAC,UAAC,OAAO,EAAE,MAAM,IAAK,aAAM,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAApC,CAAoC,CAAC,CAAC;SACvF,CAAC,CAAC;SAEF,EAAE,CAAC,mBAAmB,EAAE;aACpB,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC;SACjC,CAAC,CAAC;SAEF,EAAE,CAAC,mCAAmC,EAAE,UAAC,IAAa;aAClD,QAAQ,CAAC,IAAI,CACT,IAAI,EACJ,cAAO,CAAC,CACX,CAAC;SACN,CAAC,CAAC;KACN,CAAC,CAAC,CAAC;AACP,EAAC;AAnBe,qBAAY,eAmB3B;;;;;;;;ACpBkE,EAAC;AAWpE;KAKI,kBAAY,MAAkB;SAC1B,IAAI,CAAC,MAAM,GAAG,CAAa,CAAC;SAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACnB,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAa,CAAC;SAExC,IAAI,CAAC;aACD,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACtC,CAAE;SAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;aACR,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SACnB,CAAC;KACL,CAAC;KAEM,uBAAI,GAAX,UAAY,WAAqB,EAAE,UAAoB;SACnD,IAAI,CAAC,MAAM,CAAC;aACR,WAAW,EAAE,WAAW;aACxB,UAAU,EAAE,UAAU;UACzB,CAAC,CAAC;KACP,CAAC;KAEO,0BAAO,GAAf,UAAgB,MAAW;SACvB,IAAI,CAAC,MAAM,GAAG,CAAe,CAAC;SAC9B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;SAErB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KAC1B,CAAC;KAEO,yBAAM,GAAd,UAAe,KAAc;SACzB,IAAI,CAAC,MAAM,GAAG,CAAc,CAAC;SAC7B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAEpB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KAC1B,CAAC;KAEO,yBAAM,GAAd,UAAe,QAAmB;SAC9B,MAAM,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;aACjB,KAAK,CAAa;iBACd,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC9B,KAAK,CAAC;aAEV,KAAK,CAAe;iBAChB,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBAClC,KAAK,CAAC;aAEV,KAAK,CAAc;iBACf,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACjC,KAAK,CAAC;SACd,CAAC;KACL,CAAC;KACL,eAAC;AAAD,EAAC;AAvDY,iBAAQ,WAuDpB","file":"tests.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a88f12faf6c6f262a8f0","import { sampleSpec } from './src/sampleSpec'\r\nimport { prowmiseSpec } from './src/prowmiseSpec'\r\n\r\n//sampleSpec();\r\nprowmiseSpec();\n\n\n// WEBPACK FOOTER //\n// ./test/main.ts","import { Prowmise } from '../../src/prowmise'\r\nimport { State } from '../../src/prowmise'\r\n\r\nexport function prowmiseSpec() {\r\n    describe(\"Prowmise\", () => {\r\n        let instance:Prowmise;\r\n\r\n        beforeEach(function() {\r\n            instance = new Prowmise((resolve, reject) => window.setTimeout(resolve(100), 200));            \r\n        })\r\n\r\n        it(\"should accept new\", () => {\r\n            expect(instance).toBeDefined;\r\n        })\r\n\r\n        it(\"should trigger callback onFulfill\", (done:Function) => {\r\n            instance.done(\r\n                done, // onFulfilled\r\n                () => {} // onRejected\r\n            );            \r\n        })\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test/src/prowmiseSpec.ts","//https://www.promisejs.org/implementing/\r\n\r\nexport const enum State { Pending = 0, Fulfilled = 1, Rejected = 2};\r\n\r\ninterface IResolvable {\r\n    (resolve:Function, reject:Function) : any;\r\n}\r\n\r\ninterface IHandlers {\r\n    onFulfilled: Function,\r\n    onRejected: Function\r\n}\r\n\r\nexport class Prowmise {\r\n    private _state: State;\r\n    private _value: any;\r\n    private _handlers: Array<IHandlers>;\r\n\r\n    constructor(action:IResolvable) {\r\n        this._state = State.Pending;\r\n        this._value = null;\r\n        this._handlers = new Array<IHandlers>();\r\n\r\n        try {\r\n            action(this.fulfill, this.reject);\r\n        } catch(e) {\r\n            this.reject(e);\r\n        }\r\n    }\r\n\r\n    public done(onFulfilled: Function, onRejected: Function): void {\r\n        this.handle({\r\n            onFulfilled: onFulfilled,\r\n            onRejected: onRejected\r\n        });\r\n    }\r\n\r\n    private fulfill(result: any): void {\r\n        this._state = State.Fulfilled;\r\n        this._value = result;\r\n\r\n        this._handlers.forEach(this.handle);\r\n        this._handlers = null;\r\n    }\r\n\r\n    private reject(error?: string) : void {\r\n        this._state = State.Rejected;\r\n        this._value = error; // useless ?\r\n\r\n        this._handlers.forEach(this.handle);\r\n        this._handlers = null;\r\n    }\r\n\r\n    private handle(handlers: IHandlers) {\r\n        switch(this._state) {\r\n            case State.Pending:\r\n                this._handlers.push(handlers);\r\n                break;\r\n\r\n            case State.Fulfilled:\r\n                handlers.onFulfilled(this._value);\r\n                break;\r\n\r\n            case State.Rejected:\r\n                handlers.onRejected(this._value);\r\n                break;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/prowmise.ts"],"sourceRoot":""}